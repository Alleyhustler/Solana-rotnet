"use strict";(()=>{const[o,e]=$(` <form id="actions" action="#"> <label for="find">Find</label> <input dir="auto" id="find" type="search"> <button type="button" title="Random"> <svg viewBox="0 0 16 16" width="0" height="0"> <path d="M15 11c-3.3.4-4.9-.5-6-1.7M7 6.7C6 5.5 4.4 4.7 1 5M15 5c-9-1-5 7-14 6"/> <path d="m13 3 2 2-2 2M13 9l2 2-2 2"/> </svg> </button> <a class="button" title="Changes/Feed" href="changelog/index.html"> <svg viewBox="0 0 16 16" width="0" height="0"> <path d="M2 2a12 12 0 0 1 12 12"/> <path d="M2 6a8 8 0 0 1 8 8"/> <path d="M2 12A1 1 0 0 0 5 12A1 1 0 0 0 2 12"/> </svg> </a> <button type="button" title="Suggest URL(s)"> <svg viewBox="0 0 16 16" width="0" height="0"> <path d="M2 8l12 0"/> <path d="M8 2l0 12"/> </svg> <svg viewBox="0 0 16 16" width="0" height="0"> <path d="M3 3l10 10"/> <path d="M13 3l-10 10"/> </svg> </button> <button type="button" title="Expand All"> <svg viewBox="0 0 16 16" width="0" height="0"> <path d="M3 5.8 8 2l5 3.8M3 10.2 8 14l5-3.8"/> </svg> <svg viewBox="0 0 16 16" width="0" height="0"> <path d="m3 3 5 3.8L13 3M3 13l5-3.8 5 3.8"/> </svg> </button> </form> ${$("noscript")[1].innerHTML} `),r=o.querySelector("input"),[b,t,n]=o.querySelectorAll("button"),s=e.querySelector("button"),f=$("main"),d=$("main > ul"),u=$("main li"),a=$("details"),i=$("main a"),h=i.filter(e=>!e.classList.contains("no-rand")&&!e.classList.contains("ico"));function g(e,t){let n=null;return()=>{n&&window.clearInterval(n),n=window.setTimeout(()=>{n=null,e()},t)}}function m(){a.forEach(e=>{e.open=!0}),n.children[0].classList.add("hidden"),n.children[1].classList.remove("hidden"),n.title="Collapse All",n.onclick=l}function l(){a.forEach(e=>{e.open=!1}),n.children[0].classList.remove("hidden"),n.children[1].classList.add("hidden"),n.title="Expand All",n.onclick=m}function v(){e.classList.remove("hidden"),t.children[0].classList.add("hidden"),t.children[1].classList.remove("hidden"),t.title="Close Suggestion Form",t.onclick=p}function p(){e.classList.add("hidden"),t.children[0].classList.remove("hidden"),t.children[1].classList.add("hidden"),t.title="Suggest URL(s)",t.onclick=v}o.onsubmit=e=>{e.preventDefault()},r.onkeydown=e=>{e.key==="Enter"&&(e.preventDefault(),i.find(e=>!e.parentElement.hidden).click())},r.onkeyup=g(()=>{const e=r.value.toLowerCase();e?(m(),u.forEach(t=>{t.hidden=!t.textContent.toLowerCase().includes(e)})):(l(),u.forEach(e=>{e.hidden=!1}))},100),b.onclick=()=>{window.open(h[Math.floor(Math.random()*h.length)],"_blank")},e.onsubmit=n=>{n.preventDefault(),!e.disabled&&(e.disabled=!0,e.urls.disabled=!0,s.classList.add("loading"),s.disabled=!0,fetch(`${API_HOST}/api/links/suggest.txt`,{method:"POST",headers:{"Content-Type":"text/plain"},body:e.urls.value}).then(n=>{e.disabled=!1,e.urls.disabled=!1,s.classList.remove("loading"),s.disabled=!1,n.ok?(toast("Thanks for the suggestions!"),e.urls.value="",t.click()):toast("Problem suggesting. Please try again.")}).catch(()=>{e.disabled=!1,e.urls.disabled=!1,s.classList.remove("loading"),s.disabled=!1,toast("Problem submitting. Please try again.")}))};const c=a[0].innerHTML.match(/(?<=https?:\/*)[^/]+/gu).indexOf(window.location.host);if(c!==-1){const e=i[c].parentElement;e.innerHTML+=' <abbr title="You Are Here">📍</abbr>',i[c]=e.children[0]}$("li:not(.dir)").forEach((e,t)=>e.style.setProperty("--sprite-pos",`${t*-17}px`)),l(),p(),f.insertBefore(o,d),f.insertBefore(e,d)})()